create Database v_pack_db;

-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

CREATE TABLE product (
  product_id int(11) NOT NULL AUTO_INCREMENT,
  product_name varchar(300) NOT NULL,
  quantity int(11) NOT NULL,
  Purchase_price decimal(10,2) NOT NULL,
  Selling_price decimal(10,2) NOT NULL,
  profit decimal(10,2) GENERATED ALWAYS AS (Selling_price - Purchase_price) VIRTUAL,
  warranty int(11) DEFAULT 0,
  product_condition varchar(12) NOT NULL,
  Adding_date varchar(12) NOT NULL,
  Adding_time varchar(15) NOT NULL,

  Primary key(product_id)
);

INSERT INTO product (product_id, product_name, quantity, Purchase_price, Selling_price, warranty, product_condition, Adding_date, Adding_time) VALUES
	(2, "WD Hard 500GB", 1, 6000.00, 6800.00, 36, "Brand New", "29-04-2021", "07:04:19 PM"),
	(3, "EVGA Power Supply 600W", 7, 28000.00, 32500.00, 36, "Brand New", "29-04-2021", "07:06:24 PM"),
	(5, "Toshiba Hard 500GB", 13, 5250.00, 5800.00, 36, "Brand New", "29-04-2021", "07:04:19 PM"),
	(6, "Corsair Power Supply 500W", 2, 34700.00, 37000.00, 36, "Brand New", "29-04-2021", "07:06:24 PM"),
	(7, "SanDisk Ram 32GB", 12, 2850.00, 3350.00, 60, "Brand New", "18-09-2020", "02:58:52 PM"),
	(8, "WD Hard 1TB", 4, 8900.00, 10500.00, 12, "Second Hand", "29-04-2021", "07:04:19 PM"),
	(9, "Cooler Master Power Supply 750W", 1, 35800.00, 39000.00, 36, "Brand New", "29-04-2021", "07:06:24 PM"),
	(10, "Lexar 32GB pen Drive", 0, 3350.00, 3800.00, 60, "Brand New", "06-01-2023", "01:37:21 PM"),
	(11, "Lexar 64GB pen Drive", 5, 5500.00, 6250.00, 60, "Brand New", "06-01-2023", "04:34:27 PM"),
	(12, "Kinston Ram 64GB", 0, 7500.00, 8450.00, 60, "Brand New", "06-01-2023", "05:48:53 PM"),
	(14, "MSI MotherBourd B250", 4, 22000.00, 25000.00, 36, "Brand New", "07-01-2023", "12:39:22 AM"),
	(15, "Corsair Power Supply 400W", 0, 30000.00, 33800.00, 0, "Second Hand", "2023-02-19", "08:26:44 PM"),
	(16, "SeaGate 2TB Extranal Hard Disk", 5, 23500.00, 28900.00, 24, "Brand New", "2023-02-22", "04:47:09 PM"),
	(17, "Astro 2.1 Subwoofer", 10, 6800.00, 8900.00, 12, "Brand New", "2023-02-22", "10:41:07 PM"),
	(18, "Astro 5.1 Subwoofer", 3, 12500.00, 16800.00, 12, "Brand New", "2023-02-22", "10:44:10 PM");

-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

CREATE TABLE systemlogin (
  NIC varchar(12) NOT NULL,
  Fname varchar(30) NOT NULL,
  Lname varchar(30) NOT NULL,
  Gender varchar(10) NOT NULL,
  HouseNo varchar(30) NOT NULL,
  Street varchar(40) NOT NULL,
  Town varchar(40) NOT NULL,
  UserRole varchar(10) default "Cashier" not null,
  UserName varchar(10) NOT NULL,
  UserPassword varchar(10) NOT NULL,

  Primary key(NIC)
);

INSERT INTO systemlogin (NIC, Fname, Lname, Gender, HouseNo, Street, Town, UserRole, UserName, UserPassword) VALUES
	("123456789V", "User", "user", "Male", "A", "B", "C", "Admin", "User", "12345"),
	("982050022V", "Damith", "Deshan", "Male", "Elagawaththa", "Karaputugala", "Kamburupitiya", "Admin", "Admin", "admin"),
	("992548756V", "Yasiru", "Prabhashita", "Male", "23/A", "Karaputugala", "Thumbe", "Chasier", "yasiru98", "1234");


-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


CREATE TABLE invoice (
  invoice_id int(11) NOT NULL AUTO_INCREMENT,
  user_nic varchar(12) NOT NULL,
  paid_amount decimal(10,2) NOT NULL,
  total decimal(10,2) NOT NULL,
  discount decimal(10,2) NOT NULL,
  sub_total decimal(10,2) NOT NULL,
  balance decimal(10,2) NOT NULL,
  quantity int(11) NOT NULL,
  Adding_date date NOT NULL,
  Adding_time varchar(15) NOT NULL,

  Primary key (invoice_id),
  FOREIGN KEY (user_nic) REFERENCES systemlogin(NIC)
);

INSERT INTO invoice (invoice_id, user_nic, paid_amount, total, discount, sub_total, balance, quantity, Adding_date, Adding_time) VALUES
	(20, "123456789V", 20000.00, 16750.00, 0.00, 16750.00, 3250.00, 5, "2018-01-06", "03:07:44 PM"),
    (21, "123456789V", 15000.00, 11600.00, 0.00, 11600.00, 4400.00, 2, "2018-07-08", "03:15:25 PM"),
    (22, "123456789V", 35000.00, 32500.00, 0.00, 32500.00, 2500.00, 1, "2019-12-01", "03:18:48 PM"),
    (23, "123456789V", 20000.00, 16900.00, 0.00, 16900.00, 4100.00, 2, "2019-05-02", "03:20:04 PM"),
    (24, "123456789V", 45000.00, 42000.00, 420.00, 41580.00, 4850.00, 1, "2019-07-19", "03:21:44 PM"),
    (25, "123456789V", 15000.00, 10500.00, 0.00, 10500.00, 4500.00, 1, "2020-07-03", "03:23:01 PM"),
    (26, "123456789V", 4000.00, 3350.00, 0.00, 3350.00, 650.00, 1, "2020-10-08", "03:32:09 PM"),
    (27, "123456789V", 17000.00, 16900.00, 0.00, 16900.00, 100.00, 2, "2020-09-12", "03:33:45 PM"),
    (28, "123456789V", 4000.00, 3350.00, 0.00, 3350.00, 650.00, 1, "2021-03-01", "03:37:39 PM"),
    (29, "123456789V", 4000.00, 3350.00, 0.00, 3350.00, 650.00, 1, "2021-07-07", "03:41:09 PM"),
    (30, "123456789V", 15000.00, 14300.00, 0.00, 14300.00, 700.00, 2, "2021-06-11", "03:47:01 PM"),
    (31, "123456789V", 100000.00, 97500.00, 0.00, 97500.00, 2500.00, 3, "2022-10-02", "03:48:54 PM"),
    (32, "123456789V", 4000.00, 3800.00, 0.00, 3800.00, 200.00, 1, "2022-11-04",  "03:59:07 PM"),
    (33, "123456789V", 12000.00, 11600.00, 0.00, 11600.00, 400.00, 2, "2022-02-05",  "06:44:41 PM"),
    (34, "123456789V", 40000.00, 39000.00, 0.00, 39000.00, 1000.00, 1, "2022-11-07",  "06:46:13 PM"),
    (35, "123456789V", 22000.00, 21000.00, 0.00, 21000.00, 0.00, 2, "2022-04-08",  "06:48:22 PM"),
    (36, "123456789V", 6000.00, 5800.00, 0.00, 5800.00, 200.00, 1, "2022-07-10",  "07:19:33 PM"),
    (37, "123456789V", 4000.00, 3350.00, 0.00, 3350.00, 650.00, 1, "2022-06-11",  "07:24:24 PM"),
    (38, "123456789V", 11000.00, 10500.00, 0.00, 10500.00, 500.00, 1, "2022-09-11",  "07:31:21 PM"),
    (39, "123456789V", 17000.00, 16750.00, 0.00, 16750.00, 250.00, 2, "2022-02-12",  "09:48:52 PM"),
    (40, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 300.00, 2, "2022-08-12",  "09:50:46 PM"),
    (41, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 300.00, 2, "2022-11-12",  "09:51:47 PM"),
    (42, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 300.00, 2, "2023-01-01",  "09:55:05 PM"),
	(43, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 300.00, 2, "2023-03-01",  "09:56:44 PM"),
    (44, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 300.00, 2, "2023-04-01",  "09:57:10 PM"),
    (45, "123456789V", 10500.00, 10050.00, 0.00, 10050.00, 450.00, 1, "2023-06-01",  "09:57:56 PM"),
    (46, "123456789V", 4000.00, 3700.00, 0.00, 3700.00, 300.00, 2, "2023-08-01",  "10:15:51 PM"),
    (47, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 300.00, 2, "2023-10-01",  "10:17:12 PM"),
    (48, "123456789V", 11000.00, 10500.00, 0.00, 10500.00, 500.00, 1, "2023-12-01",  "10:19:02 PM"),
    (49, "123456789V", 70000.00, 65000.00, 0.00, 65000.00, 5000.00, 2, "2023-06-02",  "10:20:18 PM"),
    (50, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 300.00, 2, "2023-07-02",  "10:31:29 PM"),
    (51, "123456789V", 40000.00, 39000.00, 0.00, 39000.00, 1000.00, 1, "2023-08-02",  "10:35:20 PM"),
    (52, "123456789V", 15000.00, 14300.00, 0.00, 14300.00, 700.00, 2, "2023-09-02",  "10:36:18 PM"),
	(53, "123456789V", 100000.00, 97500.00, 0.00, 97500.00, 2500.00, 3, "2022-10-02", "03:48:54 PM"),
	(54, "123456789V", 10000.00, 9150.00, 0.00, 9150.00, 850.00, 2, "2023-11-02", "10:40:21 PM"),
	(55, "123456789V", 8000.00, 7150.00, 0.00, 7150.00, 850.00, 2, "2023-11-02", "10:43:49 PM"),
	(56, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 300.00, 2, "2023-12-02", "07:13:24 AM"),
	(57, "123456789V", 70000.00, 62900.00, 0.00, 62900.00, 2100.00, 5, "2023-02-12", "11:27:14 AM"),
	(58, "123456789V", 7000.00, 6800.00, 0.00, 6800.00, 200.00, 1, "2023-02-12", "12:47:04 PM"),
	(59, "123456789V", 10000.00, 9150.00, 0.00, 9150.00, 850.00, 2, "2023-02-17", "08:15:01 AM"),
	(60, "123456789V", 7000.00, 6700.00, 0.00, 6700.00, 3000.00, 2, "2023-02-19", "11:23:48 AM"),
	(61, "123456789V", 26000.00, 25450.00, 0.00, 25450.00, 550.00, 5, "2023-02-19", "11:25:21 AM"),
	(62, "123456789V", 45000.00, 42550.00, 0.00, 42550.00, 2450.00, 4, "2023-02-19", "12:26:27 PM"),
	(63, "123456789V", 75000.00, 74850.00, 0.00, 74850.00, 150.00, 6, "2023-02-19", "03:44:11 PM"),
	(64, "123456789V", 40000.00, 37000.00, 0.00, 37000.00, 3000.00, 1, "2023-02-19", "03:45:46 PM"),
	(65, "123456789V", 65000.00, 62000.00, 0.00, 62000.00, 3000.00, 2, "2023-02-19",  "07:45:17 PM"),
	(66, "123456789V", 40000.00, 39000.00, 0.00, 39000.00, 1000.00, 1, "2023-02-19",  "07:52:06 PM"),
	(67, "123456789V", 40000.00, 39000.00, 0.00, 39000.00, 1000.00, 1, "2023-02-19",  "08:16:48 PM"),
	(68, "123456789V", 60000.00, 60000.00, 0.00, 60000.00, 0.00, 2, "2023-02-22",  "10:30:37 AM"),
	(69, "123456789V", 11000.00, 10500.00, 0.00, 10500.00, 500.00, 1, "2023-02-23",  "10:24:54 AM"),
	(70, "123456789V", 11000.00, 10500.00, 0.00, 10500.00, 500.00, 1, "2023-02-23",  "10:25:01 AM"),
	(71, "123456789V", 11000.00, 10500.00, 0.00, 10500.00, 500.00, 1, "2023-02-23",  "10:25:13 AM"),
	(72, "123456789V", 11000.00, 10500.00, 0.00, 10500.00, 500.00, 1, "2023-02-23",  "10:30:20 AM"),
	(73, "123456789V", 52000.00, 52350.00, 1047.00, 51303.00, 697.00, 5, "2023-03-01",  "02:30:32 AM"),
	(74, "123456789V", 120000.00, 117000.00, 0.00, 117000.00, 3000.00, 3, "2023-03-01",  "02:35:05 AM"),
	(75, "123456789V", 35000.00, 32400.00, 0.00, 2200.00, 2600.00, 5, "2023-03-02",  "10:38:28 PM");


-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


CREATE TABLE selling (
  selling_id int(11) NOT NULL AUTO_INCREMENT,
  product_id int(11) NOT NULL,
  invo_id int(11) NOT NULL,
  quantity int(11) NOT NULL,
  sell_profit decimal(10,2) DEFAULT NULL,
  Selling_date varchar(12) NOT NULL,
  Selling_time varchar(15) NOT NULL,

  Primary key (selling_id),
  FOREIGN KEY (product_id) REFERENCES product(product_id),
  FOREIGN KEY (invo_id) REFERENCES invoice(invoice_id)
  
);

INSERT INTO selling (selling_id, product_id, invo_id, quantity, sell_profit, Selling_date, Selling_time) VALUES
	(18, 7, 20, 5, 2500.00, "09-01-2023",  "03:08:13 PM"),
	(19, 5, 21, 2, 1100.00, "09-01-2023", "03:15:35 PM"),
	(20, 3, 22, 1, 4500.00, "09-01-2023", "03:18:51 PM"),
	(21, 12, 23, 2, 1900.00, "09-01-2023", "03:20:06 PM"),
	(22, 8, 24, 1, 1600.00, "09-01-2023", "03:21:46 PM"),
	(23, 8, 25, 1, 1600.00, "09-01-2023", "03:23:03 PM"),
	(24, 7, 26, 1, 500.00, "09-01-2023", "03:32:17 PM"),
	(25, 12, 27, 2, 1900.00, "09-01-2023", "03:33:51 PM"),
	(26, 7, 28, 1, 500.00, "09-01-2023", "03:37:52 PM"),
	(27, 7, 29, 1, 500.00, "09-01-2023", "03:41:21 PM"),
	(28, 8, 30, 1, 1600.00, "09-01-2023", "03:47:11 PM"),
	(29, 10, 30, 1, 450.00,"09-01-2023","03:47:11 PM"),
	(30, 3, 31, 3, 13500.00, "09-01-2023",  "03:49:02 PM"),
	(31, 10, 32, 1, 450.00, "09-01-2023",  "03:59:21 PM"),
	(32, 5, 33, 2, 1100.00, "09-01-2023",  "06:44:52 PM"),
	(33, 9, 34, 1, 3200.00, "09-01-2023",  "06:46:17 PM"),
	(34, 8, 35, 2, 3200.00, "09-01-2023",  "06:48:25 PM"),
	(35, 5, 36, 1, 550.00, "09-01-2023",  "07:19:45 PM"),
	(36, 8, 38, 1, 1600.00, "09-01-2023",  "07:31:22 PM"),
	(37, 7, 39, 1, 500.00, "09-01-2023",  "09:48:53 PM"),
	(38, 7, 39, 1, 500.00, "09-01-2023",  "09:48:53 PM"),
	(39, 7, 40, 2, 500.00, "09-01-2023",  "09:50:47 PM"),
	(40, 7, 41, 2, 500.00, "09-01-2023",  "09:51:48 PM"),
	(41, 7, 42, 2, 500.00, "09-01-2023",  "09:55:06 PM"),
	(42, 7, 43, 2, 500.00, "09-01-2023",  "09:56:45 PM"),
	(43, 7, 44, 2, 500.00, "09-01-2023",  "09:57:13 PM"),
	(44, 7, 45, 1, 500.00, "09-01-2023",  "09:57:57 PM"),
	(45, 8, 46, 2, 700.00, "09-01-2023",  "10:15:52 PM"),
	(46, 7, 47, 2, 1000.00, "09-01-2023",  "10:17:13 PM"),
	(47, 8, 48, 1, 1600.00, "09-01-2023",  "10:19:03 PM"),
	(48, 3, 49, 2, 9000.00, "09-01-2023",  "10:20:20 PM"),
	(49, 10, 30, 1, 450.00, "09-01-2023", "03:47:11 PM"),
	(50, 9, 51, 1, 3200.00, "09-01-2023", "10:35:25 PM"),
	(51, 8, 52, 1, 3200.00, "09-01-2023", "10:36:24 PM"),
	(52, 10, 52, 1, 450.00, "09-01-2023", "10:36:24 PM"),
	(53, 8, 53, 2, 3200.00, "09-01-2023", "10:38:30 PM"),
	(54, 10, 53, 3, 1350.00, "09-01-2023", "10:38:30 PM"),
	(55, 5, 54, 1, 550.00, "09-01-2023", "10:40:35 PM"),
	(56, 7, 54, 1, 500.00, "09-01-2023", "10:40:35 PM"),
	(57, 7, 55, 1, 500.00, "09-01-2023", "10:43:53 PM"),
	(58, 10, 55, 1, 450.00, "09-01-2023", "10:43:53 PM"),
	(59, 7, 56, 2, 500.00, "41-02-2023", "07:13:33 PM"),
	(60, 8, 57, 2, 3200.00, "43-02-2023", "11:27:19 AM"),
	(61, 12, 57, 2, 1900.00, "43-02-2023", "11:27:19 AM"),
	(62, 14, 57, 1, 3000.00, "43-02-2023", "11:27:19 AM"),
	(63, 2, 58, 1, 800.00, "2023-12-02", "12:47:08 PM"),
	(64, 5, 59, 1, 550.00, "2023-02-17", "08:15:05 AM"),
	(65, 7, 59, 1, 500.00, "2023-02-17", "08:15:05 AM"),
	(68, 9, 67, 1, 3200.00, "2023-02-19", "08:16:56 PM"),
	(69, 15, 68, 2, 7600.00, "2023-02-22", "10:30:47 AM"),
	(70, 8, 72, 1, 1600.00, "2023-02-23", "10:30:28 AM"),
	(71, 11, 73, 3, 2250.00, "2023-03-01", "02:31:13 AM"),
	(72, 18, 73, 2, 8600.00, "2023-03-01", "02:31:15 AM"),
	(73, 9, 74, 3, 9600.00, "2023-03-01",  "02:35:17 AM");


-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


CREATE TABLE warranty (
  item_code varchar(12) NOT NULL,
  invo_id int(11) NOT NULL,
  prod_id int(11) NOT NULL,
  coustomer_NIC varchar(12) DEFAULT NULL,
  coustomer_name varchar(30) DEFAULT NULL,
  Warranty_period int(11) NOT NULL,
  Expiration_date date NOT NULL,

  Primary key (item_code),
  FOREIGN KEY (prod_id) REFERENCES product(product_id),
  FOREIGN KEY (invo_id) REFERENCES invoice(invoice_id)
);


INSERT INTO warranty (item_code, invo_id, prod_id, coustomer_NIC, coustomer_name, Warranty_period, Expiration_date) VALUES
	("0021", 73, 11, "982050022V", "Damith", 60, "2028-03-01"),
	("021542", 73, 11, "982050022V", "Damith", 60, "2028-03-01"),
	("022215825", 73, 11, "982050022V", "Damith", 60, "2028-03-01"),
	("100", 40, 7, "", "", 60, "2022-12-21"),
	("111", 36, 5, "qawq", "weqwe", 36, "2027-10-21"),
	("11111", 74, 9, "", "", 36, "2026-03-01"),
	("11114777747", 67, 9, "AAA", "BBB", 36, "2026-02-19"),
	("12548658", 68, 15, "15482", "Damith", 36, "2026-02-22"),
	("1254877", 72, 8, "", "", 12, "2024-02-23"),
	("154822455", 68, 15, "15482", "Damith", 36, "2026-02-22"),
	("215842", 73, 18, "982050022V", "Damith", 12, "2024-03-01"),
	("2222", 74, 9, "", "", 36, "2026-03-01"),
	("251", 35, 8, "", "", 36, "2026-02-10"),
	("25148", 73, 18, "982050022V", "Damith", 12, "2024-03-01"),
	("252", 33, 5, "", "", 36, "2024-02-18"),
	("2556", 29, 7, "jghj", "ghjkgh", 60, "2023-02-02"),
	("256", 41, 7, "", "", 60, "2024-07-31"),
	("257", 41, 7, "", "", 60, "2022-12-13"),
	("32568", 59, 5, "2351", "65831", 36, "2026-02-17"),
	("333333", 74, 9, "", "", 36, "2026-03-01"),
	("36", 39, 7, "", "", 60, "2028-06-15"),
	("55353", 35, 8, "", "", 36, "2023-09-21"),
	("564567", 31, 3, "", "", 36, "2023-02-04"),
	("6584756", 59, 7, "2351", "65831", 60, "2028-02-17"),
	("7567676", 31, 3, "", "", 36, "2024-05-03"),
	("767678678678", 31, 3, "", "", 36, "2027-07-15"),
	("888", 42, 7, "", "", 60, "2023-03-04"),
	("99", 40, 7, "", "", 60, "2026-11-22");


-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
